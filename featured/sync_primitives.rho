!input ../lang
@import lang[trace]
@import lang.oracle[yield]

let ev = event
spawn func() {
    trace("[task#1] start")
    yield()
    trace("[task#1] yielded")
    notify ev
    trace("[task#1] notified")
}
spawn func() {
    trace("[task#2] finish")
}
trace("[main] spawned")
wait ev
trace("[main] wait finished")