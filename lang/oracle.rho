@package lang.oracle

let yield_fut = future

let yield = func() {
    wait yield_fut
}
@export yield

spawn func() {
    loop {
        intrinsic oracle_advance_future oracle_advance ()
        wait oracle_advance
        # TODO count the yielded tasks and only break when no more task yielded
        notify yield_fut
        break
    }
}
